diff -ur mbedtls-2.28.2.orig/include/mbedtls/platform.h mbedtls-2.28.2/include/mbedtls/platform.h
--- mbedtls-2.28.2.orig/include/mbedtls/platform.h	2022-12-12 16:17:36.000000000 +0100
+++ mbedtls-2.28.2/include/mbedtls/platform.h	2022-12-16 23:46:10.658905445 +0100
@@ -69,7 +69,7 @@
  * implementations of some standard library functions, including snprintf
  * and vsnprintf. This affects MSVC and MinGW builds.
  */
-#if defined(__MINGW32__) || (defined(_MSC_VER) && _MSC_VER <= 1900)
+#if !__USE_MINGW_ANSI_STDIO && (defined(__MINGW32__) || (defined(_MSC_VER) && _MSC_VER <= 1900))
 #define MBEDTLS_PLATFORM_HAS_NON_CONFORMING_SNPRINTF
 #define MBEDTLS_PLATFORM_HAS_NON_CONFORMING_VSNPRINTF
 #endif
